<%# --------Admin-------- %>
<% if user_signed_in? && current_user.admin? %>
  <p id="notice"><%= notice %></p>
  <h1>Products</h1>
  <table>
    <thead>
      <tr>
        <th>Name</th>
        <th>Description</th>
        <th>Price</th>
        <th>Photo</th>
        <th>Action</th>
        <th colspan="5"></th>
      </tr>
    </thead>
    <tbody>
      <% @products.each do |product| %>
        <tr>
          <td><%= product.name %></td>
          <td><%= product.description %></td>
          <td>$<%= product.price %></td>
          <td>
            <% product.photos.each do |photo| %>
              <%= image_tag(photo, size:"150x150") %>
            <% end %>
          </td>
          <td><%= link_to 'Show', product %></td>
          <td><%= link_to 'Edit', edit_product_path(product) %></td>
          <td><%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <br>
  <%= link_to 'New Product', new_product_path %>
<% else %>
  <%# --------User--------  %>
  <div class="product-title">
    <h2>All</h2>
  </div>
  <div class="product page-flex">
    <% @products.each do |product| %>
      <%= render partial: 'product', locals: { product: product } %>
    <% end %>
  </div>
  <div class="product-title">
    <h2>Woman</h2>
  </div>
  <div class="product page-flex">
    <% @products.each do |product| %>
      <% if product.category.title == "Woman's" %>
        <%= render partial: 'product', locals: { product: product } %>
      <% end %>
    <% end %>
  </div>
  <div class="product-title">
    <h2>Men</h2>
  </div>
  <div class="product page-flex">
    <% @products.each do |product| %>
      <% if product.category.title == "Men's" %>
        <%= render partial: 'product', locals: { product: product } %>
      <% end %>
    <% end %>
  </div>
  <div class="product-title">
    <h2>Accessorries</h2>
  </div>
  <div class="product page-flex">
    <% @products.each do |product| %>
      <% if product.category.title == "Accessorries" %>
        <%= render partial: 'product', locals: { product: product } %>
      <% end %>
    <% end %>
  </div>
<% end %>
